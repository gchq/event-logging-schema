#Each pipeline configuration will be run against the sourceSchema

#pipelineName     - The name of the pipeline
#basePipelineName - The name of a pipeline that this pipeline extends, e.g. if pipeline X has transforms X1,X2 and
#                   pipeline Y has transforms Y1,Y2 and the base pipeline of X is Y, then the effective transforms of
#                   X will be Y1,Y2,X1,X2
#outputSuffix     - Optional suffix to apply to the generated xsd file and 'id' attribute,
#                   e.g. event-logging-v<majorVersion>-<suffix>.xsd
#                   e.g. id="event-logging-v<majorVersion>-<suffix>"
#outputBaseName   - Optional base name for the generated xsd file and 'id' attribute, if not supplied the
#                   name of the source schema will be used.
#                   e.g. <baseName>-v<majorVersion>-<suffix>.xsd.
#                   e.g. id="event-logging-v<majorVersion>-<suffix>"
#hasOutput        - True if this pipeline should produce a schema file
#transformations  - An ordered list of the xslt files that make up a pipeline of relative transformations.
#                   Each transformation will be applied to the result of the preceding transformation
#                   Each file must exist in the directory './transformations' where '.' is the directory
#                   of this configuration file.

# The name of the generated schema for an output pipeline will be of the form:
#   <outputBaseName>-vX<-outputSuffix>.xsd
# Where X is the major version of the generated schema as extracted from its 'version' attribute
# If outputBaseName is not set then the name of the source schema will be used as the outputBaseName

# The 'id' attribute of the generate for an output pipeline will be of the form:
#   <outputBaseName>-vX.Y.Z<-outputSuffix>
# Where X.Y.Z is the full version of the generated schema as copied from its 'version' attribute
# If outputBaseName is not set then the name of the source schema will be used as the outputBaseName

pipelines:

  - pipelineName: "fullSchema"
    hasOutput: true
    transformations:
      - "ensureOccurrence.xsl"
      - "extractSimpleTypes.xsl"
      - "orderElements.xsl"
      - "removeVimModeline.xsl"
          
  - pipelineName: "client-variant"
    basePipelineName: "fullSchema"
    outputSuffix: "client"
    hasOutput: true
    transformations:
      - "jaxbEventRoot.xsl"
      - "jaxbNoEventId.xsl"
      - "jaxbNoUserDetails.xsl"

  # This pipeline is used solely for creating a schema to validate the example
  # XML in the documentation. It should be identical to the fullSchema version
  # except for having a static version number.
  # The travis build won't release this schema
  - pipelineName: "documentation"
    basePipelineName: "fullSchema"
    outputSuffix: "documentation"
    hasOutput: true
    transformations:
      - "documentationVersionNumber.xsl"

  # This pipeline is for use in pipeline development, e.g. only include
  # orderElements.xsl then compare the output
  # schema to the one generated by the test pipeline.
  # The travis build won't release this schema
  - pipelineName: "identity"
    outputSuffix: "identity"
    outputBaseName: "identity"
    hasOutput: true
    transformations:
      - "orderElements.xsl"

  # This pipeline is for use in pipeline development, e.g. just include the
  # transformation under test then compare the output schema to the one
  # generated by the identity pipeline.
  # The travis build won't release this schema
  - pipelineName: "test"
    basePipelineName: "identity"
    outputSuffix: "test"
    outputBaseName: "test"
    hasOutput: true
    transformations:
      - "documentationVersionNumber.xsl"
